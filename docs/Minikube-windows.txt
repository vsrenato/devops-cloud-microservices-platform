Instalando o Minikube no Windows
Vamos aprender a instalar a versÃ£o mais recente do Minikube no Windows 10 e 11, especificamente com o VirtualBox v7.0. Esta instalaÃ§Ã£o pressupÃµe que nenhum outro software de isolamento esteja instalado em nossa estaÃ§Ã£o de trabalho Windows, como Hyper-V, VMware Workstation, QEMU ou Docker Engine, que o Minikube possa usar como driver.

OBSERVAÃ‡ÃƒO : Para outras versÃµes do SO, VirtualBox e Minikube, as etapas de instalaÃ§Ã£o podem variar! Consulte a instalaÃ§Ã£o do Minikube para obter instruÃ§Ãµes especÃ­ficas!

Verifique o suporte Ã  virtualizaÃ§Ã£o no seu sistema Windows (vÃ¡rias linhas de saÃ­da terminando com "Sim" indicam virtualizaÃ§Ã£o suportada):

PS C:\WINDOWS\system32> informaÃ§Ãµes do sistema

Instale o hipervisor do VirtualBox para "hosts Windows". Baixe e instale o pacote .exe .

OBSERVAÃ‡ÃƒO : pode ser necessÃ¡rio desabilitar o Hyper-V no seu host Windows (se instalado e usado anteriormente) ao executar o VirtualBox.

Instalar o Minikube. Podemos baixar a versÃ£o mais recente ou uma versÃ£o especÃ­fica disponÃ­vel na pÃ¡gina de lanÃ§amentos do Minikube . ApÃ³s o download, precisamos garantir que ele seja adicionado ao nosso PATH . Existem vÃ¡rios pacotes disponÃ­veis para download para Windows, encontrados em uma versÃ£o do Minikube. No entanto, baixar e instalar o minikube-installer.exe adicionarÃ¡ automaticamente o executÃ¡vel ao PATH . Vamos baixar e instalar o pacote minikube-installer.exe mais recente .

Inicie o Minikube. Podemos iniciar o Minikube usando o comando minikube start , que inicializa um cluster de nÃ³ Ãºnico com a versÃ£o estÃ¡vel mais recente do Kubernetes suportada. Para uma versÃ£o especÃ­fica do Kubernetes, a opÃ§Ã£o --kubernetes-version pode ser usada como minikube start --kubernetes-version=v1.27.1 (onde "latest" Ã© o valor padrÃ£o e aceitÃ¡vel da versÃ£o, e "stable" tambÃ©m Ã© aceitÃ¡vel). Caso existam outros drivers de virtualizaÃ§Ã£o candidatos para o Minikube na estaÃ§Ã£o de trabalho, Ã© recomendÃ¡vel fornecer o driver desejado com a opÃ§Ã£o --driver=virtualbox . OpÃ§Ãµes de inicializaÃ§Ã£o mais avanÃ§adas serÃ£o exploradas posteriormente neste capÃ­tulo. Abra o PowerShell usando a opÃ§Ã£o Executar como Administrador e execute o seguinte comando:

PS C:\WINDOWS\system32> minikube start --driver=virtualbox

ğŸ˜„ minikube v1.32.0 no Windows 10
âœ¨ Usando o driver do VirtualBox com base na configuraÃ§Ã£o do usuÃ¡rio
ğŸ’¿ Baixando a imagem de inicializaÃ§Ã£o da VM ...
   > minikube-v1.32.1-amd64.iso....: 65 B / 65 B [---------] 100,00% ? p/s 0s
   > minikube-v1.32.1-amd64.iso: 292,96 MiB / 292,96 MiB 100,00% 31,34 MiB p
ğŸ‘ Iniciando o nÃ³ do plano de controle minikube no cluster minikube
ğŸ’¾ Baixando o Kubernetes v1.28.3 preload ...
   > preloaded-images-k8s-v18-v1...: 403,35 MiB / 403,35 MiB 100,00% 32,19 M
ğŸ”¥ Criando VM virtualbox (CPUs=2, MemÃ³ria=6000MB, Disco=20000MB) ...
ğŸ³ Preparando o Kubernetes v1.28.3 no Docker 24.0.7 ...
   â–ª Gerando certificados e chaves ...
   â–ª Inicializando o plano de controle ...
   â–ª Configurando regras RBAC...
ğŸ”— Configurando a ponte CNI (Container Networking Interface)...
ğŸ” Verificando componentes do Kubernetes...
   â–ª Usando a imagem gcr.io/k8s-minikube/storage-provisioner:v5
ğŸŒŸ Complementos habilitados: storage-provisioner, default-storageclass
ğŸ’¡ kubectl nÃ£o encontrado. Se precisar, tente: 'minikube kubectl -- get pods -A'
ğŸ„ Pronto! O kubectl agora estÃ¡ configurado para usar o cluster "minikube" e o namespace "default" por padrÃ£o.

NOTA : Uma mensagem de erro que diz "NÃ£o foi possÃ­vel escolher um driver padrÃ£o..." significa que o Minikube nÃ£o conseguiu localizar nenhum dos hipervisores ou runtimes suportados. A recomendaÃ§Ã£o Ã© instalar ou reinstalar uma ferramenta de isolamento desejada e garantir que seu executÃ¡vel seja encontrado no PATH padrÃ£o do seu sistema operacional.

Verifique o status. Com o  comando minikube status , exibimos o status do cluster Minikube. Abra o PowerShell usando a  opÃ§Ã£o Executar como Administrador e execute o seguinte comando:

PS C:\WINDOWS\system32> status do minikube

minikube
tipo: Plano de controle
host: Executando
kubelet: Executando
apiserver: Executando
kubeconfig: Configurado

Pare o Minikube. Podemos parar o Minikube usando o comando minikube stop . Este comando interrompe todos os aplicativos em execuÃ§Ã£o no Minikube, interrompe com seguranÃ§a o cluster e a VM do VirtualBox, preservando nosso trabalho atÃ© decidirmos reiniciar o cluster do Minikube, preservando a VM do Minikube. Abra o PowerShell usando a opÃ§Ã£o Executar como Administrador e execute o seguinte comando:

PS C:\WINDOWS\system32> parada do minikube

âœ‹ Parando o nÃ³ "minikube" ...
ğŸ›‘ 1 nÃ³ parado.

Quando for a hora de executar o cluster novamente, basta executar o comando minikube start (a opÃ§Ã£o de driver nÃ£o Ã© necessÃ¡ria) e ele reiniciarÃ¡ o cluster Minikube inicializado anteriormente.

Remova o Minikube. O comando minikube delete remove completamente o Minikube e a VM do Minikube. Este comando deve ser tentado somente quando o cluster Minikube for desativado. Todo o trabalho serÃ¡ perdido apÃ³s a conclusÃ£o deste comando. Abra o PowerShell usando a opÃ§Ã£o Executar como Administrador e execute o seguinte comando:

PS C:\WINDOWS\system32> minikube delete

ğŸ”¥ Excluindo "minikube" no VirtualBox ...
ğŸ’€ Removido todos os vestÃ­gios do cluster "minikube".